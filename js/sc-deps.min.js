angular.module("component.tool-tip",["mm.foundation.position"]).directive("toolTip",["$http","$window","$document","$timeout","$compile","$position","$templateCache",function(t,o,e,n,s,i,p){function l(t){return'<div class="tooltip-popup {{::type || \'short\'}}-tip" ng-class="tipClass" ng-click="$event.stopPropagation()">'+(t||'<div>{{::text}}</div><div ng-bind-html="html"></div>')+'<button ng-click="close()" class="close-button"><span class="glyph-icon"><span class="glyph-close"></span></span></button> <span class="nub"></span> </div>'}function a(t){var o=l(t.templateUrl?p.get(t.templateUrl):null);for(var e in t.scopeItems||{})t.scopeItems.hasOwnProperty(e)&&(t[e]=t.scopeItems[e]);var n=s(o)(t);return t.$digest(),n}function c(t,o,n){return o.css({top:0,left:1e4,display:"block",position:"fixed",width:"auto"}),n?e.find("body").append(o):t.after(o),o}function r(){var t=angular.element(e[0].getElementsByClassName("tooltip-popup"));t.length&&t.scope()&&t.scope().close()}function u(t){var o=angular.element(e.prop("body")).prop("clientWidth"),n=t.prop("offsetWidth");return n+2*m>o&&(n=o-2*m),n+1}function f(t,o){var e=t.prop("offsetWidth"),n=t.prop("offsetHeight");return{top:o.top-n-v+"px",left:o.left+o.width/2-e/2+"px"}}function d(t,o){var n=e[0].body.clientWidth,s=i.offset(t),p=t[0].getBoundingClientRect();s.left<m?t.css({left:m+"px"}):s.left+s.width+2*m>n&&t.css({left:"auto",right:m+"px"}),p.top<m?t.css({top:o.top+o.height+v+"px"}).addClass("bottom-tooltip"):t.removeClass("bottom-tooltip")}function h(t,o){var e=angular.element(t[0].getElementsByClassName("nub")),n=i.offset(t);e.css({left:o.left-n.left+o.width/2+"px"})}var m=12,v=20;return{template:'<span class="show-tooltip" ng-transclude></span>',transclude:!0,scope:{type:"@",event:"@",appendToBody:"=",text:"=",html:"=",scopeItems:"=scope",templateUrl:"@",tipClass:"@",positionOn:"@",transitionDuration:"@"},link:function(s,l){function m(){return angular.isDefined(s.appendToBody)?s.appendToBody:!0}function v(){l.on(C,$),"hover"===B&&(l.on("mouseenter",$),"short"===D&&l.on("mouseleave",w))}function g(){l.off(C,$),l.off("mouseenter",$),l.off("mouseleave",w)}function b(t){t.preventDefault(),t.stopPropagation()}function y(){e.on("click",w),e.on("touchend",w),k.on("touchend",b),angular.element(o).bind("resize",w)}function $(t){if(t.preventDefault(),t.stopPropagation(),k)w();else{r();var o=m()?i.offset(l):i.position(l);k=a(s),k=c(l,k,m()),k.css({width:u(k)+"px"}),k.css({position:"absolute"}).css(f(k,o)),m()&&(d(k,o),h(k,o),x=o),y(),"hover"===B&&l.off("mouseenter",$)}}function w(){if(e.off("click touchend",w),angular.element(o).unbind("resize",w),k){x=null,k.off("touchend",b),"hover"===B&&l.on("mouseenter",$);var t=s.transitionDuration||.3,i="all linear "+t.toString()+"s";k.css({"-webkit-transition":i,"-moz-transition":i,"-o-transition":i,transition:i,opacity:"0"}),n(function(){k&&(k.remove(),k=null)},1e3*t)}}s.templateUrl&&!p.get(s.templateUrl)&&t.get(s.templateUrl).then(function(t){p.put(s.templateUrl,t.data)});var k,x,C,U={click:"click",touch:"touchstart"},B=s.event||"hover",D=s.type||"short";C=o.hasOwnProperty("ontouchstart")?U.touch:U[B]||U.click,s.close=function(){w()},s.$on("$destroy",function(){w(),g()}),v(),s.$on(s.positionOn||"tool-tip:position",function(t,o){if(k&&m()){var e=i.offset(l),n=x?Math.abs(x.top-e.top):0;80>n&&o&&o.top<e.top&&o.top+o.height>e.top?(k.css({position:"absolute"}).css(f(k,e)),d(k,e)):s.close()}})}}}]);
//# sourceMappingURL=../js/sc-deps.min.js.map